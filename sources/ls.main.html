<!doctype html>
<html lang="en">
<head>
    <title>LetSynchronise: LET Task Simulator</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Base URL for all links on this page -->
    <base href="../">

    <!-- JavaScript frameworks/libraries this page depends on -->
    <script src="dependencies/d3-7.2.0/dist/d3.js"></script>
    <script src="dependencies/bootstrap-5.1.3/js/bootstrap.bundle.js"></script>
    
    <!-- CSS to use for this page -->
    <link rel="stylesheet" href="dependencies/bootstrap-5.1.3/css/bootstrap.css">
    
    <!-- Our own CSS -->
    <link rel="stylesheet" href="sources/ls.main.css">
    
    <!-- Our own JavaScript code/library/framework. Execution is deferred until the page has loaded -->
    <!-- <script type="module"> does not work when executed locally -->
    <script src="sources/model/ls.model.js"></script>
    <script src="sources/model/ls.model.exportImport.js"></script>
    <script src="sources/model/ls.model.interface.js"></script>
    <script src="sources/model/ls.model.dependency.js"></script>
    <script src="sources/model/ls.model.schedule.js"></script>
    <script src="sources/model/ls.model.task.js"></script>
    <script src="sources/model/ls.model.logical.task.js"></script>
    <script src="sources/model/ls.model.constraint.js"></script>
    <script src="sources/model/ls.model.eventChain.js"></script>
    <script src="sources/model/ls.model.chain.js"></script>
    <script src="sources/model/ls.model.chainInstance.js"></script>
    <script src="sources/model/ls.model.analyse.js"></script>
    <script src="sources/model/ls.model.database.js"></script>

    <script src="sources/view/ls.view.js"></script>
    <script src="sources/view/ls.view.exportImport.js"></script>
    <script src="sources/view/ls.view.interface.js"></script>
    <script src="sources/view/ls.view.dependency.js"></script>
    <script src="sources/view/ls.view.schedule.js"></script>
    <script src="sources/view/ls.view.task.js"></script>
    <script src="sources/view/ls.view.constraint.js"></script>
    <script src="sources/view/ls.view.eventChain.js"></script>
    <script src="sources/view/ls.view.analyse.js"></script>

    <script src="sources/controller/ls.controller.js"></script>
    <script src="sources/controller/ls.controller.exportImport.js"></script>
    <script src="sources/controller/ls.controller.interface.js"></script>
    <script src="sources/controller/ls.controller.dependency.js"></script>
    <script src="sources/controller/ls.controller.schedule.js"></script>
    <script src="sources/controller/ls.controller.task.js"></script>
    <script src="sources/controller/ls.controller.constraint.js"></script>
    <script src="sources/controller/ls.controller.eventChain.js"></script>
    <script src="sources/controller/ls.controller.analyse.js"></script>

    <script src="sources/ls.utility.js"></script>
    
    <script src="sources/plugins/ls.plugin.metric.js"></script>
    <script src="sources/plugins/ls.plugin.metric.dataAge.js"></script>
    <script src="sources/plugins/ls.plugin.metric.end2end.js"></script>
    <script src="sources/plugins/ls.plugin.metric.latency.js"></script>
    
    <script src="sources/plugins/ls.plugin.importer.js"></script>
    <script src="sources/plugins/ls.plugin.exporter.js"></script>
    <script src="sources/plugins/ls.plugin.externalTool.js"></script>

    <script defer src="sources/ls.main.js"></script>
</head>
<body>

    <h1>LetSynchronise: LET Task Simulator</h1>
    
    <p>LetSynchronise is an interactive tool for defining a set of LET tasks and analysing their data-flow dependencies.</p>

    <!-- This page has different tab views -->
    <nav>
        <!-- Buttons for the tab views defined below -->
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <button class="nav-link active" id="nav-design-tab" data-bs-toggle="tab" data-bs-target="#nav-design" type="button" role="tab" aria-controls="nav-design" aria-selected="true">Design</button>
            <button class="nav-link" id="nav-analyse-tab" data-bs-toggle="tab" data-bs-target="#nav-analyse" type="button" role="tab" aria-controls="nav-analyse" aria-selected="false">Analyse</button>
        </div>
    </nav>

    <!-- Content for the tab views defined below -->
    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-design" role="tabpanel" aria-labelledby="nav-design-tab">
            <h3>System Export or Import</h3>
                
            <form id="view-exportimport">
                <div class="row">
                    <div class="col-auto">
                        <button id="export-system" type="submit" class="btn btn-primary">Export</button>
                    </div>
                
                    <div class="col-sm-4">
                        <div class="input-group">
                            <input id="import-system-file" type="file" accept=".json" class="form-control"/>
                            <button id="import-system" type="submit" class="btn btn-primary">Import</button>
                        </div>
                    </div>
                    
                    <div class="col-auto">
                        <button id="reset-system" type="submit" class="btn btn-danger">Reset</button>
                    </div>
                </div>
            </form>
        
            <div class="m-5"></div>


            <h3>Define System Inputs and Outputs</h3>
            
            <form id="view-system-interface">
                <div class="row">
                    <div class="col-auto">
                        <div class="input-group">
                            <span class="input-group-text" for="view-system-input-name">Input</span>
                            <input required type="text" id="view-system-input-name" class="form-control"/>
                            <button id="submitInput" type="submit" class="btn btn-primary">Save</button>
                        </div>
                        
                        <div class="m-3"></div>
                        
                        <ul id="view-system-inputs"></ul>
                    </div>
                
                    <div class="col-auto">
                        <div class="input-group">
                            <span class="input-group-text" for="view-system-output-name">Output</span>
                            <input required type="text" id="view-system-output-name" class="form-control"/>
                            <button id="submitOutput" type="submit" class="btn btn-primary">Save</button>
                        </div>
                        <div class="m-3"></div>
                        <ul id="view-system-outputs"></ul>
                    </div>
                </div>
            </form>

            <div class="m-3"></div>


            <h3>Define or Edit a LET Task</h3>
            
            <form class="row gx-3 gy-2" id="view-task-define">
                <div class="col-8">
                    <div class="input-group">
                        <span for="name" class="input-group-text col-3">Name</span>
                        <input required type="text" class="form-control" id="name" value="t1"/>
                    </div>
                </div>

                <div class="col-6">
                    <div class="input-group">
                        <span for="initial-offset" class="input-group-text col-5">Initial Offset</span>
                        <input required type="text" class="form-control" id="initial-offset" value="1"/>
                        <span class="input-group-text">ms</span>
                    </div>
                </div>
                
                <div class="col-6">
                    <div class="input-group">
                        <span for="activation-offset" class="input-group-text col-5">Activation Offset</span>
                        <input required type="text" class="form-control" id="activation-offset" value="1"/>
                        <span class="input-group-text">ms</span>
                    </div>
                </div>

                <div class="col-6">
                    <div class="input-group">
                        <span for="duration" class="input-group-text col-5">Duration</span>
                        <input required type="text" class="form-control" id="duration" value="1"/>
                        <span class="input-group-text">ms</span>
                    </div>
                </div>
                
                <div class="col-6">
                    <div class="input-group">
                        <span for="period" class="input-group-text col-5">Period</span>
                        <input required type="text" class="form-control" id="period" value="2"/>
                        <span class="input-group-text">ms</span>
                    </div>
                </div>

                <div class="col-6">
                    <div class="input-group">
                        <span for="inputs" class="input-group-text col-5">Inputs</span>
                        <input required type="text" class="form-control" id="inputs" placeholder="E.g., in1, in2, in3" value="in1, in2, in3"/>
                    </div>
                </div>
                
                <div class="col-6">
                    <div class="input-group">
                        <label for="outputs" class="input-group-text col-5">Outputs</label>
                        <input required type="text" class="form-control" id="outputs" placeholder="E.g., out1, out2, out3" value="out1, out2, out3"/>
                    </div>
                </div>

                <div>
                    <button id="previewTask" type="submit" class="btn btn-primary">Preview</button>
                    <button id="submitTask" type="submit" class="btn btn-primary">Save</button>
                    <button id="clearTask" type="reset" class="btn btn-danger">Clear</button>
                </div>
            
                <div>
                    <div id="view-task-preview"></div>
                </div>
            </form>
            
            <div class="m-5"></div>
            
            
            <h3>Current Task Set</h3>
            
            <ul id="view-task-set"></ul>
            
            <div class="m-5"></div>
            
            
            <h3>Define Task Dependencies</h3>
            
            <form class="row g-3" id="view-task-dependency">
                <div class="col-3">
                    <div class="input-group">
                        <span class="input-group-text" for="view-task-dependency-name">Name</span>
                        <input required type="text" id="view-task-dependency-name" class="form-control"/>
                    </div>
                </div>
                
                <div class="col-3">
                    <div class="input-group">
                        <span class="input-group-text" for="view-task-dependency-source">Source</span>
                        <select id="view-task-dependency-source" class="form-select">
                            <option disabled selected>Choose ...</option>
                        </select>
                    </div>
                </div>
                
                <div class="col-3">
                    <div class="input-group">
                        <span class="input-group-text" for="view-task-dependency-destination">Destination</span>
                        <select id="view-task-dependency-destination" class="form-select">
                            <option disabled selected>Choose ...</option>
                        </select>
                    </div>
                </div>
                
                <div class="col">
                    <button id="submitDependency" type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>

            <div class="m-3"></div>

            <ul id="view-task-dependencies"></ul>

            <div class="m-3"></div>

        </div>
        
        
        <div class="tab-pane fade" id="nav-analyse" role="tabpanel" aria-labelledby="nav-analyse-tab">
            <h3>LET Task Schedule</h3>

            <form class="row" id="view-schedule-details">
                <div class="col-3">
                    <div class="input-group">
                    	<span for="prologue" class="input-group-text">Prologue</span>
                        <input required type="text" class="form-control" id="prologue" readonly/>
                        <span class="input-group-text">ms</span>
                    </div>
                </div>

                <div class="col-3">
                    <div class="input-group">
						<span for="hyperperiod" class="input-group-text">Hyper-period</span>
						<input required type="text" class="form-control" id="hyperperiod" readonly/>
						<span class="input-group-text">ms</span>
                    </div>
                </div>
                
                <div class="col-3">
                    <div class="input-group">
                    	<span for="makespan" class="input-group-text">Makespan</span>
                        <input required type="text" class="form-control" id="makespan" value="10"/>
                        <span class="input-group-text">ms</span>
                    </div>
                </div>
            </form>
            
            <div class="m-2"></div>
            
            <div>
                <button id="update" type="submit" class="btn btn-primary">Update</button>
                <button id="analyse" type="submit" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#analyse-modal">Analyse</button>
                <div id="view-schedule-dependencies" class="dropdown">
                    <button class="btn btn-danger dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Dependencies
                    </button>
                    <div id="view-schedule-dependencies-menu" class="dropdown-menu">
                        <a class="dropdown-item">None</a>
                    </div>
                </div>
                
                <!-- Modal for analysis results -->
				<div class="modal fade" id="analyse-modal" tabindex="-1" aria-labelledby="analyse-modal-label" aria-hidden="true">
					<div class="modal-dialog modal-lg modal-dialog-scrollable">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="analyse-modal-label">Analysis results</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							
							<div class="modal-body">
								<div class="accordion" id="analyse-modal-body">
                                    <div class="accordion-item">

										<h2 class="accordion-header">
											<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
												Event chain
      										</button>
    									</h2>
										
										<div id="collapse1" class="accordion-collapse collapse" data-bs-parent="#analyse-modal-body">
											<div class="accordion-body">
        										<strong>This is the first item's accordion
        										body.</strong> It is shown by default, until
        										the collapse plugin adds the appropriate classes
        										that we use to style each element. These
        										classes control the overall appearance, as
        										well as the showing and hiding via CSS
        										transitions. You can modify any of this with
        										custom CSS or overriding our default variables.
        										It's also worth noting that just about any HTML
        										can go within the <code>.accordion-body</code>, 
        										though the transition does limit overflow.
												<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
												<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
												<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
												<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
												<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							
							<div class="modal-footer">
								<button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
							</div>
						</div>
					</div>
				</div>
            </div>
            
            <div class="m-3"></div>
            
            <div id="view-schedule"></div>
            
            <div id="view-schedule-task-tooltip"></div>
            <div id="view-schedule-dataflow-tooltip"></div>
            
            <div class="m-5"></div>


            <h3>Define Event Chains</h3>

            <form class="row gx-3 gy-2" id="view-analyse-event-chai-define">
            	<div class="col-3">
					<div class="input-group">
						<span class="input-group-text" for="view-analyse-event-chain-name">Name</span>
						<input required type="text" id="view-analyse-event-chain-name" class="form-control"/>
					</div>
                </div>
                
            	<div class="col-3">
					<div class="input-group">
						<span class="input-group-text" for="view-analyse-event-chain-dependency">Dependency</span>
						<select id="view-analyse-event-chain-dependency" class="form-select">
							<option disabled selected>Choose ...</option>
						</select>
					</div>
                </div>

                <div class="col">
                	<button id="nextDependency" type="submit" class="btn btn-outline-secondary">Next</button>
                </div>

            	<div class="col-6">
					<div class="input-group">
						<span class="input-group-text" for="view-analyse-event-chain-dependencies">Dependencies</span>
						<span id="view-analyse-event-chain-dependencies" class="form-control"></span>
					</div>
                </div>
                
                <div class="col">
                    <button id="clearDependencies" type="submit" class="btn btn-danger">Clear</button>
                    <button id="submitEventChain" type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
            
            <div class="m-3"></div>
            

            
            <ul id="view-analyse-event-chains"></ul>
            
            <div class="m-5"></div>
            
            
            <h3>Define Timing Constraints</h3>
            
            <form class="row" id="view-analyse-constraint-define">
                <div class="col-3">
                    <div class="input-group">
						<span class="input-group-text" for="view-analyse-constraint-name">Name</span>
						<input required type="text" id="view-analyse-constraint-name" class="form-control"/>
					</div>
				</div>
                
                <div class="col-3">
                    <div class="input-group">
						<span class="input-group-text" for="view-analyse-constraint-event-chain">Event Chain</span>
						<select id="view-analyse-constraint-event-chain" class="form-select">
							<option disabled selected>Choose ...</option>
						</select>
					</div>
				</div>

                <div class="col-3">
                    <div class="input-group">
						<span class="input-group-text" for="view-analyse-constraint-relation">Relation</span>
						<select id="view-analyse-constraint-relation" class="form-select">
							<option value="null " disabled selected>Choose ...</option>
							<option value="<">&lt;</option>
							<option value="<=">&le;</option>
							<option vlaue="=">&equals;&equals;</option>
							<option value=">=">&ge;</option>
							<option value=">">&ge;</option>
						</select>
					</div>
				</div>

                <div class="col-2">
                    <div class="input-group">
						<span class="input-group-text" for="view-analyse-constraint-time">Time</span>
						<input required type="text" class="form-control" id="view-analyse-constraint-time"/>
						<span class="input-group-text">ms</span>
					</div>
				</div>
                
                <div class="col">
	                <button id="submitConstraint" type="submit" class="btn btn-primary">Save</button>
	            </div>
            </form>
            
            <div class="m-3"></div>
            
            <ul id="view-analyse-constraints"></ul>
            
            <div class="m-3"></div>

        </div>
    </div>

</body>
</html>

